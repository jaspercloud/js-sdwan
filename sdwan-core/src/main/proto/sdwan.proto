syntax = "proto2";
option java_package = "io.jaspercloud.sdwan.core.proto";
option java_outer_classname = "SDWanProtos";

enum MsgType {
  AuthReq = 1;
  AuthRespSuccess = 2;
  AuthRespFail = 3;
  NodeList = 4;
  Heart = 5;
  TunnelData = 6;
}

message SDWanMessage {
  required MsgType type = 1;
  required string channelId = 2;
  optional bytes data = 3;
}

message SDWanAuthReq {
  required string nodeId = 1;
  required int32 nodeUdpPort = 2;
}

message SDWanAuthResp {
  required string nodeIP = 1;
  required string vip = 2;
  required int32 netmaskPrefix = 3;
}

message SDWanNode {
  required string nodeId = 1;
  required string nodeIP = 2;
  required string vip = 3;
  required int32 nodeUdpPort = 4;
}

message SDWanNodeList {
  repeated SDWanNode node = 1;
}

message SDWanHeart {
}

message UdpTunnelData {
  required MsgType type = 1;
  required string src = 2;
  required string dest = 3;
  optional bytes data = 4;
}
